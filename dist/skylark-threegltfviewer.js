/**
 * skylark-threegltfviewer - A version of threegltfviewer that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-threegltfviewer/
 * @license MIT
 */
!function(e,t){var n=t.define,require=t.require,a="function"==typeof n&&n.amd,i=!a&&"undefined"!=typeof exports;if(!a&&!n){var r={};n=t.define=function(e,t,n){"function"==typeof n?(r[e]={factory:n,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var n=t.split("/"),a=e.split("/");n.pop();for(var i=0;i<a.length;i++)"."!=a[i]&&(".."==a[i]?n.pop():n.push(a[i]));return n.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):r[e]={factory:null,resolved:!0,exports:n}},require=t.require=function(e){if(!r.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=r[e];if(!module.resolved){var n=[];module.deps.forEach(function(e){n.push(require(e))}),module.exports=module.factory.apply(t,n)||null,module.resolved=!0}return module.exports}}if(!n)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-threegltfviewer/threegltviewer",["skylark-langx-ns"],function(e){return e.attach("intg.threegltviewer",{})}),e("skylark-threejs-ex/WebGL",[],function(){"use strict";var e={isWebGLAvailable:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}},isWebGL2Available:function(){try{var e=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!e.getContext("webgl2"))}catch(e){return!1}},getWebGLErrorMessage:function(){return this.getErrorMessage(1)},getWebGL2ErrorMessage:function(){return this.getErrorMessage(2)},getErrorMessage:function(e){var t={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext},n='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>',a=document.createElement("div");return a.id="webglmessage",a.style.fontFamily="monospace",a.style.fontSize="13px",a.style.fontWeight="normal",a.style.textAlign="center",a.style.background="#fff",a.style.color="#000",a.style.padding="1.5em",a.style.width="400px",a.style.margin="5em auto 0",n=(n=t[e]?n.replace("$0","graphics card"):n.replace("$0","browser")).replace("$1",{1:"WebGL",2:"WebGL 2"}[e]),a.innerHTML=n,a}};return e}),e("skylark-threejs-ex/utils/stats",[],function(){var e=function(){var t=0,n=document.createElement("div");function a(e){return n.appendChild(e.dom),e}function i(e){for(var a=0;a<n.children.length;a++)n.children[a].style.display=a===e?"block":"none";t=e}n.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",n.addEventListener("click",function(e){e.preventDefault(),i(++t%n.children.length)},!1);var r=(performance||Date).now(),o=r,s=0,l=a(new e.Panel("FPS","#0ff","#002")),c=a(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var h=a(new e.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:n,addPanel:a,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(c.update(e-r,200),e>=o+1e3&&(l.update(1e3*s/(e-o),100),o=e,s=0,h)){var t=performance.memory;h.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){r=this.end()},domElement:n,setMode:i}};return e.Panel=function(e,t,n){var a=1/0,i=0,r=Math.round,o=r(window.devicePixelRatio||1),s=80*o,l=48*o,c=3*o,h=2*o,d=3*o,p=15*o,m=74*o,u=30*o,f=document.createElement("canvas");f.width=s,f.height=l,f.style.cssText="width:80px;height:48px";var g=f.getContext("2d");return g.font="bold "+9*o+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,s,l),g.fillStyle=t,g.fillText(e,c,h),g.fillRect(d,p,m,u),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(d,p,m,u),{dom:f,update:function(l,v){a=Math.min(a,l),i=Math.max(i,l),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,s,p),g.fillStyle=t,g.fillText(r(l)+" "+e+" ("+r(a)+"-"+r(i)+")",c,h),g.drawImage(f,d+o,p,m-o,u,d,p,m-o,u),g.fillRect(d+m-o,p,o,u),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(d+m-o,p,o,r((1-l/v)*u))}}},e}),e("skylark-threejs-ex/controls/OrbitControls",["skylark-threejs"],function(e){"use strict";var t=function(t,n){var a,i,r,o,s;void 0===n&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),n===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=n,this.enabled=!0,this.target=new e.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:e.MOUSE.ROTATE,MIDDLE:e.MOUSE.DOLLY,RIGHT:e.MOUSE.PAN},this.touches={ONE:e.TOUCH.ROTATE,TWO:e.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return f.phi},this.getAzimuthalAngle=function(){return f.theta},this.saveState=function(){l.target0.copy(l.target),l.position0.copy(l.object.position),l.zoom0=l.object.zoom},this.reset=function(){l.target.copy(l.target0),l.object.position.copy(l.position0),l.object.zoom=l.zoom0,l.object.updateProjectionMatrix(),l.dispatchEvent(c),l.update(),m=p.NONE},this.update=(a=new e.Vector3,i=(new e.Quaternion).setFromUnitVectors(t.up,new e.Vector3(0,1,0)),r=i.clone().inverse(),o=new e.Vector3,s=new e.Quaternion,function(){var e=l.object.position;return a.copy(e).sub(l.target),a.applyQuaternion(i),f.setFromVector3(a),l.autoRotate&&m===p.NONE&&O(2*Math.PI/60/60*l.autoRotateSpeed),l.enableDamping?(f.theta+=g.theta*l.dampingFactor,f.phi+=g.phi*l.dampingFactor):(f.theta+=g.theta,f.phi+=g.phi),f.theta=Math.max(l.minAzimuthAngle,Math.min(l.maxAzimuthAngle,f.theta)),f.phi=Math.max(l.minPolarAngle,Math.min(l.maxPolarAngle,f.phi)),f.makeSafe(),f.radius*=v,f.radius=Math.max(l.minDistance,Math.min(l.maxDistance,f.radius)),!0===l.enableDamping?l.target.addScaledVector(y,l.dampingFactor):l.target.add(y),a.setFromSpherical(f),a.applyQuaternion(r),e.copy(l.target).add(a),l.object.lookAt(l.target),!0===l.enableDamping?(g.theta*=1-l.dampingFactor,g.phi*=1-l.dampingFactor,y.multiplyScalar(1-l.dampingFactor)):(g.set(0,0,0),y.set(0,0,0)),v=1,!!(b||o.distanceToSquared(l.object.position)>u||8*(1-s.dot(l.object.quaternion))>u)&&(l.dispatchEvent(c),o.copy(l.object.position),s.copy(l.object.quaternion),b=!1,!0)}),this.dispose=function(){l.domElement.removeEventListener("contextmenu",ee,!1),l.domElement.removeEventListener("mousedown",W,!1),l.domElement.removeEventListener("wheel",Z,!1),l.domElement.removeEventListener("touchstart",K,!1),l.domElement.removeEventListener("touchend",J,!1),l.domElement.removeEventListener("touchmove",Q,!1),document.removeEventListener("mousemove",q,!1),document.removeEventListener("mouseup",X,!1),l.domElement.removeEventListener("keydown",$,!1)};var l=this,c={type:"change"},h={type:"start"},d={type:"end"},p={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},m=p.NONE,u=1e-6,f=new e.Spherical,g=new e.Spherical,v=1,y=new e.Vector3,b=!1,E=new e.Vector2,w=new e.Vector2,x=new e.Vector2,C=new e.Vector2,k=new e.Vector2,L=new e.Vector2,T=new e.Vector2,S=new e.Vector2,A=new e.Vector2;function R(){return Math.pow(.95,l.zoomSpeed)}function O(e){g.theta-=e}function M(e){g.phi-=e}var P,F=(P=new e.Vector3,function(e,t){P.setFromMatrixColumn(t,0),P.multiplyScalar(-e),y.add(P)}),j=function(){var t=new e.Vector3;return function(e,n){!0===l.screenSpacePanning?t.setFromMatrixColumn(n,1):(t.setFromMatrixColumn(n,0),t.crossVectors(l.object.up,t)),t.multiplyScalar(e),y.add(t)}}(),H=function(){var t=new e.Vector3;return function(e,n){var a=l.domElement;if(l.object.isPerspectiveCamera){var i=l.object.position;t.copy(i).sub(l.target);var r=t.length();r*=Math.tan(l.object.fov/2*Math.PI/180),F(2*e*r/a.clientHeight,l.object.matrix),j(2*n*r/a.clientHeight,l.object.matrix)}else l.object.isOrthographicCamera?(F(e*(l.object.right-l.object.left)/l.object.zoom/a.clientWidth,l.object.matrix),j(n*(l.object.top-l.object.bottom)/l.object.zoom/a.clientHeight,l.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),l.enablePan=!1)}}();function D(e){l.object.isPerspectiveCamera?v/=e:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom*e)),l.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function U(e){l.object.isPerspectiveCamera?v*=e:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom/e)),l.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function N(e){E.set(e.clientX,e.clientY)}function G(e){C.set(e.clientX,e.clientY)}function z(e){if(1==e.touches.length)E.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);E.set(t,n)}}function _(e){if(1==e.touches.length)C.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);C.set(t,n)}}function I(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);T.set(0,a)}function V(e){if(1==e.touches.length)w.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);w.set(t,n)}x.subVectors(w,E).multiplyScalar(l.rotateSpeed);var a=l.domElement;O(2*Math.PI*x.x/a.clientHeight),M(2*Math.PI*x.y/a.clientHeight),E.copy(w)}function B(e){if(1==e.touches.length)k.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);k.set(t,n)}L.subVectors(k,C).multiplyScalar(l.panSpeed),H(L.x,L.y),C.copy(k)}function Y(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);S.set(0,a),A.set(0,Math.pow(S.y/T.y,l.zoomSpeed)),D(A.y),T.copy(S)}function W(t){if(!1!==l.enabled){var n;switch(t.preventDefault(),l.domElement.focus?l.domElement.focus():window.focus(),t.button){case 0:n=l.mouseButtons.LEFT;break;case 1:n=l.mouseButtons.MIDDLE;break;case 2:n=l.mouseButtons.RIGHT;break;default:n=-1}switch(n){case e.MOUSE.DOLLY:if(!1===l.enableZoom)return;!function(e){T.set(e.clientX,e.clientY)}(t),m=p.DOLLY;break;case e.MOUSE.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===l.enablePan)return;G(t),m=p.PAN}else{if(!1===l.enableRotate)return;N(t),m=p.ROTATE}break;case e.MOUSE.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===l.enableRotate)return;N(t),m=p.ROTATE}else{if(!1===l.enablePan)return;G(t),m=p.PAN}break;default:m=p.NONE}m!==p.NONE&&(document.addEventListener("mousemove",q,!1),document.addEventListener("mouseup",X,!1),l.dispatchEvent(h))}}function q(e){if(!1!==l.enabled)switch(e.preventDefault(),m){case p.ROTATE:if(!1===l.enableRotate)return;!function(e){w.set(e.clientX,e.clientY),x.subVectors(w,E).multiplyScalar(l.rotateSpeed);var t=l.domElement;O(2*Math.PI*x.x/t.clientHeight),M(2*Math.PI*x.y/t.clientHeight),E.copy(w),l.update()}(e);break;case p.DOLLY:if(!1===l.enableZoom)return;!function(e){S.set(e.clientX,e.clientY),A.subVectors(S,T),A.y>0?D(R()):A.y<0&&U(R());T.copy(S),l.update()}(e);break;case p.PAN:if(!1===l.enablePan)return;!function(e){k.set(e.clientX,e.clientY),L.subVectors(k,C).multiplyScalar(l.panSpeed),H(L.x,L.y),C.copy(k),l.update()}(e)}}function X(e){!1!==l.enabled&&(document.removeEventListener("mousemove",q,!1),document.removeEventListener("mouseup",X,!1),l.dispatchEvent(d),m=p.NONE)}function Z(e){!1===l.enabled||!1===l.enableZoom||m!==p.NONE&&m!==p.ROTATE||(e.preventDefault(),e.stopPropagation(),l.dispatchEvent(h),function(e){e.deltaY<0?U(R()):e.deltaY>0&&D(R());l.update()}(e),l.dispatchEvent(d))}function $(e){!1!==l.enabled&&!1!==l.enableKeys&&!1!==l.enablePan&&function(e){var t=!1;switch(e.keyCode){case l.keys.UP:H(0,l.keyPanSpeed),t=!0;break;case l.keys.BOTTOM:H(0,-l.keyPanSpeed),t=!0;break;case l.keys.LEFT:H(l.keyPanSpeed,0),t=!0;break;case l.keys.RIGHT:H(-l.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),l.update())}(e)}function K(t){if(!1!==l.enabled){switch(t.preventDefault(),t.touches.length){case 1:switch(l.touches.ONE){case e.TOUCH.ROTATE:if(!1===l.enableRotate)return;z(t),m=p.TOUCH_ROTATE;break;case e.TOUCH.PAN:if(!1===l.enablePan)return;_(t),m=p.TOUCH_PAN;break;default:m=p.NONE}break;case 2:switch(l.touches.TWO){case e.TOUCH.DOLLY_PAN:if(!1===l.enableZoom&&!1===l.enablePan)return;!function(e){l.enableZoom&&I(e);l.enablePan&&_(e)}(t),m=p.TOUCH_DOLLY_PAN;break;case e.TOUCH.DOLLY_ROTATE:if(!1===l.enableZoom&&!1===l.enableRotate)return;!function(e){l.enableZoom&&I(e);l.enableRotate&&z(e)}(t),m=p.TOUCH_DOLLY_ROTATE;break;default:m=p.NONE}break;default:m=p.NONE}m!==p.NONE&&l.dispatchEvent(h)}}function Q(e){if(!1!==l.enabled)switch(e.preventDefault(),e.stopPropagation(),m){case p.TOUCH_ROTATE:if(!1===l.enableRotate)return;V(e),l.update();break;case p.TOUCH_PAN:if(!1===l.enablePan)return;B(e),l.update();break;case p.TOUCH_DOLLY_PAN:if(!1===l.enableZoom&&!1===l.enablePan)return;!function(e){l.enableZoom&&Y(e);l.enablePan&&B(e)}(e),l.update();break;case p.TOUCH_DOLLY_ROTATE:if(!1===l.enableZoom&&!1===l.enableRotate)return;!function(e){l.enableZoom&&Y(e);l.enableRotate&&V(e)}(e),l.update();break;default:m=p.NONE}}function J(e){!1!==l.enabled&&(l.dispatchEvent(d),m=p.NONE)}function ee(e){!1!==l.enabled&&e.preventDefault()}l.domElement.addEventListener("contextmenu",ee,!1),l.domElement.addEventListener("mousedown",W,!1),l.domElement.addEventListener("wheel",Z,!1),l.domElement.addEventListener("touchstart",K,!1),l.domElement.addEventListener("touchend",J,!1),l.domElement.addEventListener("touchmove",Q,!1),l.domElement.addEventListener("keydown",$,!1),-1===l.domElement.tabIndex&&(l.domElement.tabIndex=0),this.update()};return(t.prototype=Object.create(e.EventDispatcher.prototype)).constructor=t,t}),e("skylark-threejs-ex/loaders/RGBELoader",["skylark-threejs"],function(e){"use strict";var t=function(t){e.DataTextureLoader.call(this,t),this.type=e.UnsignedByteType};return t.prototype=Object.assign(Object.create(e.DataTextureLoader.prototype),{constructor:t,parse:function(t){var n=function(e,t){switch(e){case 1:console.error("RGBELoader Read Error: "+(t||""));break;case 2:console.error("RGBELoader Write Error: "+(t||""));break;case 3:console.error("RGBELoader Bad File Format: "+(t||""));break;default:case 4:console.error("RGBELoader: Error: "+(t||""))}return-1},a=function(e,t,n){t=t||1024;for(var a=e.pos,i=-1,r=0,o="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(a,a+128)));0>(i=s.indexOf("\n"))&&r<t&&a<e.byteLength;)o+=s,r+=s.length,a+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(a,a+128)));return-1<i&&(!1!==n&&(e.pos+=r+i+1),o+s.slice(0,i))},i=function(e,t,n,a){var i=e[t+3],r=Math.pow(2,i-128)/255;n[a+0]=e[t+0]*r,n[a+1]=e[t+1]*r,n[a+2]=e[t+2]*r},r=function(){var e=new Float32Array(1),t=new Int32Array(e.buffer);function n(n){e[0]=n;var a=t[0],i=a>>16&32768,r=a>>12&2047,o=a>>23&255;return o<103?i:o>142?(i|=31744,i|=(255==o?0:1)&&8388607&a):o<113?i|=((r|=2048)>>114-o)+(r>>113-o&1):(i|=o-112<<10|r>>1,i+=1&r)}return function(e,t,a,i){var r=e[t+3],o=Math.pow(2,r-128)/255;a[i+0]=n(e[t+0]*o),a[i+1]=n(e[t+1]*o),a[i+2]=n(e[t+2]*o)}}(),o=new Uint8Array(t);o.pos=0;var s=function(e){var t,i,r=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,l=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,c={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(t=a(e)))return n(1,"no header found");if(!(i=t.match(/^#\?(\S+)$/)))return n(3,"bad initial token");c.valid|=1,c.programtype=i[1],c.string+=t+"\n";for(;!1!==(t=a(e));)if(c.string+=t+"\n","#"!==t.charAt(0)){if((i=t.match(r))&&(c.gamma=parseFloat(i[1],10)),(i=t.match(o))&&(c.exposure=parseFloat(i[1],10)),(i=t.match(s))&&(c.valid|=2,c.format=i[1]),(i=t.match(l))&&(c.valid|=4,c.height=parseInt(i[1],10),c.width=parseInt(i[2],10)),2&c.valid&&4&c.valid)break}else c.comments+=t+"\n";if(!(2&c.valid))return n(3,"missing format specifier");if(!(4&c.valid))return n(3,"missing image size specifier");return c}(o);if(-1!==s){var l=s.width,c=s.height,h=function(e,t,a){var i,r,o,s,l,c,h,d,p,m,u,f,g,v=t,y=a;if(v<8||v>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(v!==(e[2]<<8|e[3]))return n(3,"wrong scanline width");if(!(i=new Uint8Array(4*t*a))||!i.length)return n(4,"unable to allocate buffer space");r=0,o=0,d=4*v,g=new Uint8Array(4),c=new Uint8Array(d);for(;y>0&&o<e.byteLength;){if(o+4>e.byteLength)return n(1);if(g[0]=e[o++],g[1]=e[o++],g[2]=e[o++],g[3]=e[o++],2!=g[0]||2!=g[1]||(g[2]<<8|g[3])!=v)return n(3,"bad rgbe scanline format");for(h=0;h<d&&o<e.byteLength;){if(s=e[o++],(f=s>128)&&(s-=128),0===s||h+s>d)return n(3,"bad scanline data");if(f)for(l=e[o++],p=0;p<s;p++)c[h++]=l;else c.set(e.subarray(o,o+s),h),h+=s,o+=s}for(m=v,p=0;p<m;p++)u=0,i[r]=c[p+u],u+=v,i[r+1]=c[p+u],u+=v,i[r+2]=c[p+u],u+=v,i[r+3]=c[p+u],r+=4;y--}return i}(o.subarray(o.pos),l,c);if(-1!==h){switch(this.type){case e.UnsignedByteType:var d=h,p=e.RGBEFormat,m=e.UnsignedByteType;break;case e.FloatType:for(var u=h.length/4*3,f=new Float32Array(u),g=0;g<u;g++)i(h,4*g,f,3*g);var d=f,p=e.RGBFormat,m=e.FloatType;break;case e.HalfFloatType:for(var u=h.length/4*3,v=new Uint16Array(u),g=0;g<u;g++)r(h,4*g,v,3*g);var d=v,p=e.RGBFormat,m=e.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:l,height:c,data:d,header:s.string,gamma:s.gamma,exposure:s.exposure,format:p,type:m}}}return null},setDataType:function(e){return this.type=e,this},load:function(t,n,a,i){return e.DataTextureLoader.prototype.load.call(this,t,function(t,a){switch(t.type){case e.UnsignedByteType:t.encoding=e.RGBEEncoding,t.minFilter=e.NearestFilter,t.magFilter=e.NearestFilter,t.generateMipmaps=!1,t.flipY=!0;break;case e.FloatType:case e.HalfFloatType:t.encoding=e.LinearEncoding,t.minFilter=e.LinearFilter,t.magFilter=e.LinearFilter,t.generateMipmaps=!1,t.flipY=!0}n&&n(t,a)},a,i)}}),t}),e("skylark-threegltfviewer/environments",["./threegltviewer"],function(e){return e.environments=[{id:"",name:"None",path:null,format:".hdr"},{id:"venice-sunset",name:"Venice Sunset",path:"assets/environment/venice_sunset_1k.hdr",format:".hdr"},{id:"footprint-court",name:"Footprint Court (HDR Labs)",path:"assets/environment/footprint_court_2k.hdr",format:".hdr"}]}),e("skylark-threegltfviewer/vignettes",["skylark-threejs","./threegltviewer"],function(e,t){"use strict";const n=["attribute vec3 position;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","varying vec2 vUv;","void main() {","\tgl_Position = vec4(position, 1.0);","\tvUv = vec2(position.x, position.y) * 0.5 + 0.5;","}"].join("\n"),a=["precision mediump float;","#pragma glslify: grain = require('glsl-film-grain')","#pragma glslify: blend = require('glsl-blend-soft-light')","","uniform vec3 color1;","uniform vec3 color2;","uniform float aspect;","uniform vec2 offset;","uniform vec2 scale;","uniform float noiseAlpha;","uniform bool aspectCorrection;","uniform float grainScale;","uniform float grainTime;","uniform vec2 smooth;","","varying vec2 vUv;","","void main() {","\tvec2 q = vec2(vUv - 0.5);","\tif (aspectCorrection) {","\t\tq.x *= aspect;","\t}","\tq /= scale;","\tq -= offset;","\tfloat dst = length(q);","\tdst = smoothstep(smooth.x, smooth.y, dst);","\tvec3 color = mix(color1, color2, dst);","","\tif (noiseAlpha > 0.0 && grainScale > 0.0) {","\t\tfloat gSize = 1.0 / grainScale;","\t\tfloat g = grain(vUv, vec2(gSize * aspect, gSize), grainTime);","\t\tvec3 noiseColor = blend(color, vec3(g));","\t\tgl_FragColor.rgb = mix(color, noiseColor, noiseAlpha);","\t} else {","\t\tgl_FragColor.rgb = color;","\t}","\tgl_FragColor.a = 1.0;","}"].join("\n");return t.vignettes={createBackground:function(t){var i=(t=t||{}).geometry||new e.PlaneGeometry(2,2,1),r=new e.RawShaderMaterial({vertexShader:n,fragmentShader:a,side:e.DoubleSide,uniforms:{aspectCorrection:{type:"i",value:!1},aspect:{type:"f",value:1},grainScale:{type:"f",value:.005},grainTime:{type:"f",value:0},noiseAlpha:{type:"f",value:.25},offset:{type:"v2",value:new e.Vector2(0,0)},scale:{type:"v2",value:new e.Vector2(1,1)},smooth:{type:"v2",value:new e.Vector2(0,1)},color1:{type:"c",value:new e.Color("#fff")},color2:{type:"c",value:new e.Color("#283844")}},depthTest:!1}),o=new e.Mesh(i,r);o.frustumCulled=!1,o.style=function(t){if(t=t||{},Array.isArray(t.colors)){var n=t.colors.map(function(t){return"string"==typeof t||"number"==typeof t?new e.Color(t):t});r.uniforms.color1.value.copy(n[0]),r.uniforms.color2.value.copy(n[1])}if("number"==typeof t.aspect&&(r.uniforms.aspect.value=t.aspect),"number"==typeof t.grainScale&&(r.uniforms.grainScale.value=t.grainScale),"number"==typeof t.grainTime&&(r.uniforms.grainTime.value=t.grainTime),t.smooth){var a=s(t.smooth,e.Vector2);r.uniforms.smooth.value.copy(a)}if(t.offset){var i=s(t.offset,e.Vector2);r.uniforms.offset.value.copy(i)}if("number"==typeof t.noiseAlpha&&(r.uniforms.noiseAlpha.value=t.noiseAlpha),void 0!==t.scale){var o=t.scale;"number"==typeof o&&(o=[o,o]),o=s(o,e.Vector2),r.uniforms.scale.value.copy(o)}void 0!==t.aspectCorrection&&(r.uniforms.aspectCorrection.value=Boolean(t.aspectCorrection))},t&&o.style(t);return o;function s(e,t){return Array.isArray(e)?(new t).fromArray(e):e}}}}),e("skylark-threegltfviewer/Viewer",["skylark-threejs","skylark-threejs-ex/utils/stats","skylark-threejs-ex/loaders/GLTFLoader","skylark-threejs-ex/loaders/DRACOLoader","skylark-threejs-ex/controls/OrbitControls","skylark-threejs-ex/loaders/RGBELoader","skylark-datgui","./threegltviewer","./environments","./vignettes"],function(e,t,n,a,i,r,o,s,l,c){"use strict";const h="[default]",d=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,p=["map","aoMap","emissiveMap","glossinessMap","metalnessMap","normalMap","roughnessMap","specularMap"],m={ASSET_GENERATOR:"assetgenerator"};e.Cache.enabled=!0;function u(e,t){e.traverse(e=>{if(!e.isMesh)return;const n=Array.isArray(e.material)?e.material:[e.material];n.forEach(t)})}return s.Viewer=class{constructor(n,a){this.el=n,this.options=a,this.lights=[],this.content=null,this.mixer=null,this.clips=[],this.gui=null,this.state={environment:a.preset===m.ASSET_GENERATOR?l.find(e=>"footprint-court"===e.id).name:l[1].name,background:!1,playbackSpeed:1,actionStates:{},camera:h,wireframe:!1,skeleton:!1,grid:!1,addLights:!0,exposure:1,textureEncoding:"sRGB",ambientIntensity:.3,ambientColor:16777215,directIntensity:.8*Math.PI,directColor:16777215,bgColor1:"#ffffff",bgColor2:"#353535"},this.prevTime=0,this.stats=new t,this.stats.dom.height="48px",[].forEach.call(this.stats.dom.children,e=>e.style.display=""),this.scene=new e.Scene;const r=a.preset===m.ASSET_GENERATOR?144/Math.PI:60;this.defaultCamera=new e.PerspectiveCamera(r,n.clientWidth/n.clientHeight,.01,1e3),this.activeCamera=this.defaultCamera,this.scene.add(this.defaultCamera),this.renderer=window.renderer=new e.WebGLRenderer({antialias:!0}),this.renderer.physicallyCorrectLights=!0,this.renderer.outputEncoding=e.sRGBEncoding,this.renderer.setClearColor(13421772),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(n.clientWidth,n.clientHeight),this.pmremGenerator=new e.PMREMGenerator(this.renderer),this.pmremGenerator.compileEquirectangularShader(),this.controls=new i(this.defaultCamera,this.renderer.domElement),this.controls.autoRotate=!1,this.controls.autoRotateSpeed=-10,this.controls.screenSpacePanning=!0,this.vignette=c.createBackground({aspect:this.defaultCamera.aspect,grainScale:d?0:.001,colors:[this.state.bgColor1,this.state.bgColor2]}),this.vignette.name="Vignette",this.vignette.renderOrder=-1,this.el.appendChild(this.renderer.domElement),this.cameraCtrl=null,this.cameraFolder=null,this.animFolder=null,this.animCtrls=[],this.morphFolder=null,this.morphCtrls=[],this.skeletonHelpers=[],this.gridHelper=null,this.axesHelper=null,this.addAxesHelper(),this.addGUI(),a.kiosk&&this.gui.close(),this.animate=this.animate.bind(this),requestAnimationFrame(this.animate),window.addEventListener("resize",this.resize.bind(this),!1)}animate(e){requestAnimationFrame(this.animate);const t=(e-this.prevTime)/1e3;this.controls.update(),this.stats.update(),this.mixer&&this.mixer.update(t),this.render(),this.prevTime=e}render(){this.renderer.render(this.scene,this.activeCamera),this.state.grid&&(this.axesCamera.position.copy(this.defaultCamera.position),this.axesCamera.lookAt(this.axesScene.position),this.axesRenderer.render(this.axesScene,this.axesCamera))}resize(){const{clientHeight:e,clientWidth:t}=this.el.parentElement;this.defaultCamera.aspect=t/e,this.defaultCamera.updateProjectionMatrix(),this.vignette.style({aspect:this.defaultCamera.aspect}),this.renderer.setSize(t,e),this.axesCamera.aspect=this.axesDiv.clientWidth/this.axesDiv.clientHeight,this.axesCamera.updateProjectionMatrix(),this.axesRenderer.setSize(this.axesDiv.clientWidth,this.axesDiv.clientHeight)}load(t,i,r){const o=e.LoaderUtils.extractUrlBase(t);return new Promise((s,l)=>{const c=new e.LoadingManager;c.setURLModifier((e,t)=>{const n=i+decodeURI(e).replace(o,"").replace(/^(\.?\/)/,"");if(r.has(n)){const e=r.get(n),t=URL.createObjectURL(e);return p.push(t),t}return(t||"")+e});const h=new n(c);h.setCrossOrigin("anonymous");const d=new a;d.setDecoderPath("assets/draco/"),h.setDRACOLoader(d);const p=[];h.load(t,e=>{const t=e.scene||e.scenes[0],n=e.animations||[];if(!t)throw new Error("This model contains no scene, and cannot be viewed here. However, it may contain individual 3D resources.");this.setContent(t,n),p.forEach(URL.revokeObjectURL),s(e)},void 0,l)})}setContent(t,n){this.clear();const a=(new e.Box3).setFromObject(t),i=a.getSize(new e.Vector3).length(),r=a.getCenter(new e.Vector3);this.controls.reset(),t.position.x+=t.position.x-r.x,t.position.y+=t.position.y-r.y,t.position.z+=t.position.z-r.z,this.controls.maxDistance=10*i,this.defaultCamera.near=i/100,this.defaultCamera.far=100*i,this.defaultCamera.updateProjectionMatrix(),this.options.cameraPosition?(this.defaultCamera.position.fromArray(this.options.cameraPosition),this.defaultCamera.lookAt(new e.Vector3)):(this.defaultCamera.position.copy(r),this.defaultCamera.position.x+=i/2,this.defaultCamera.position.y+=i/5,this.defaultCamera.position.z+=i/2,this.defaultCamera.lookAt(r)),this.setCamera(h),this.axesCamera.position.copy(this.defaultCamera.position),this.axesCamera.lookAt(this.axesScene.position),this.axesCamera.near=i/100,this.axesCamera.far=100*i,this.axesCamera.updateProjectionMatrix(),this.axesCorner.scale.set(i,i,i),this.controls.saveState(),this.scene.add(t),this.content=t,this.state.addLights=!0,this.content.traverse(e=>{e.isLight?this.state.addLights=!1:e.isMesh&&(e.material.depthWrite=!e.material.transparent)}),this.setClips(n),this.updateLights(),this.updateGUI(),this.updateEnvironment(),this.updateTextureEncoding(),this.updateDisplay(),window.content=this.content,console.info("[glTF Viewer] THREE.Scene exported as `window.content`."),this.printGraph(this.content)}printGraph(e){console.group(" <"+e.type+"> "+e.name),e.children.forEach(e=>this.printGraph(e)),console.groupEnd()}setClips(t){this.mixer&&(this.mixer.stopAllAction(),this.mixer.uncacheRoot(this.mixer.getRoot()),this.mixer=null),this.clips=t,t.length&&(this.mixer=new e.AnimationMixer(this.content))}playAllClips(){this.clips.forEach(e=>{this.mixer.clipAction(e).reset().play(),this.state.actionStates[e.name]=!0})}setCamera(e){e===h?(this.controls.enabled=!0,this.activeCamera=this.defaultCamera):(this.controls.enabled=!1,this.content.traverse(t=>{t.isCamera&&t.name===e&&(this.activeCamera=t)}))}updateTextureEncoding(){const t="sRGB"===this.state.textureEncoding?e.sRGBEncoding:e.LinearEncoding;u(this.content,e=>{e.map&&(e.map.encoding=t),e.emissiveMap&&(e.emissiveMap.encoding=t),(e.map||e.emissiveMap)&&(e.needsUpdate=!0)})}updateLights(){const e=this.state,t=this.lights;e.addLights&&!t.length?this.addLights():!e.addLights&&t.length&&this.removeLights(),this.renderer.toneMappingExposure=e.exposure,2===t.length&&(t[0].intensity=e.ambientIntensity,t[0].color.setHex(e.ambientColor),t[1].intensity=e.directIntensity,t[1].color.setHex(e.directColor))}addLights(){const t=this.state;if(this.options.preset===m.ASSET_GENERATOR){const t=new e.HemisphereLight;return t.name="hemi_light",this.scene.add(t),void this.lights.push(t)}const n=new e.AmbientLight(t.ambientColor,t.ambientIntensity);n.name="ambient_light",this.defaultCamera.add(n);const a=new e.DirectionalLight(t.directColor,t.directIntensity);a.position.set(.5,0,.866),a.name="main_light",this.defaultCamera.add(a),this.lights.push(n,a)}removeLights(){this.lights.forEach(e=>e.parent.remove(e)),this.lights.length=0}updateEnvironment(){const e=l.filter(e=>e.name===this.state.environment)[0];this.getCubeMapTexture(e).then(({envMap:e})=>{e&&this.state.background||this.activeCamera!==this.defaultCamera?this.scene.remove(this.vignette):this.scene.add(this.vignette),this.scene.environment=e,this.scene.background=this.state.background?e:null})}getCubeMapTexture(t){const{path:n}=t;return n?new Promise((t,a)=>{(new r).setDataType(e.UnsignedByteType).load(n,e=>{const n=this.pmremGenerator.fromEquirectangular(e).texture;this.pmremGenerator.dispose(),t({envMap:n})},void 0,a)}):Promise.resolve({envMap:null})}updateDisplay(){this.skeletonHelpers.length&&this.skeletonHelpers.forEach(e=>this.scene.remove(e)),u(this.content,e=>{e.wireframe=this.state.wireframe}),this.content.traverse(t=>{if(t.isMesh&&t.skeleton&&this.state.skeleton){const n=new e.SkeletonHelper(t.skeleton.bones[0].parent);n.material.linewidth=3,this.scene.add(n),this.skeletonHelpers.push(n)}}),this.state.grid!==Boolean(this.gridHelper)&&(this.state.grid?(this.gridHelper=new e.GridHelper,this.axesHelper=new e.AxesHelper,this.axesHelper.renderOrder=999,this.axesHelper.onBeforeRender=(e=>e.clearDepth()),this.scene.add(this.gridHelper),this.scene.add(this.axesHelper)):(this.scene.remove(this.gridHelper),this.scene.remove(this.axesHelper),this.gridHelper=null,this.axesHelper=null,this.axesRenderer.clear()))}updateBackground(){this.vignette.style({colors:[this.state.bgColor1,this.state.bgColor2]})}addAxesHelper(){this.axesDiv=document.createElement("div"),this.el.appendChild(this.axesDiv),this.axesDiv.classList.add("axes");const{clientWidth:t,clientHeight:n}=this.axesDiv;this.axesScene=new e.Scene,this.axesCamera=new e.PerspectiveCamera(50,t/n,.1,10),this.axesScene.add(this.axesCamera),this.axesRenderer=new e.WebGLRenderer({alpha:!0}),this.axesRenderer.setPixelRatio(window.devicePixelRatio),this.axesRenderer.setSize(this.axesDiv.clientWidth,this.axesDiv.clientHeight),this.axesCamera.up=this.defaultCamera.up,this.axesCorner=new e.AxesHelper(5),this.axesScene.add(this.axesCorner),this.axesDiv.appendChild(this.axesRenderer.domElement)}addGUI(){const t=this.gui=new o.GUI({autoPlace:!1,width:260,hideable:!0}),n=t.addFolder("Display"),a=n.add(this.state,"background");a.onChange(()=>this.updateEnvironment());const i=n.add(this.state,"wireframe");i.onChange(()=>this.updateDisplay());const r=n.add(this.state,"skeleton");r.onChange(()=>this.updateDisplay());const s=n.add(this.state,"grid");s.onChange(()=>this.updateDisplay()),n.add(this.controls,"autoRotate"),n.add(this.controls,"screenSpacePanning");const c=n.addColor(this.state,"bgColor1"),h=n.addColor(this.state,"bgColor2");c.onChange(()=>this.updateBackground()),h.onChange(()=>this.updateBackground());const d=t.addFolder("Lighting"),p=d.add(this.state,"textureEncoding",["sRGB","Linear"]);p.onChange(()=>this.updateTextureEncoding()),d.add(this.renderer,"outputEncoding",{sRGB:e.sRGBEncoding,Linear:e.LinearEncoding}).onChange(()=>{this.renderer.outputEncoding=Number(this.renderer.outputEncoding),u(this.content,e=>{e.needsUpdate=!0})});const m=d.add(this.state,"environment",l.map(e=>e.name));m.onChange(()=>this.updateEnvironment()),[d.add(this.state,"exposure",0,2),d.add(this.state,"addLights").listen(),d.add(this.state,"ambientIntensity",0,2),d.addColor(this.state,"ambientColor"),d.add(this.state,"directIntensity",0,4),d.addColor(this.state,"directColor")].forEach(e=>e.onChange(()=>this.updateLights())),this.animFolder=t.addFolder("Animation"),this.animFolder.domElement.style.display="none";const f=this.animFolder.add(this.state,"playbackSpeed",0,1);f.onChange(e=>{this.mixer&&(this.mixer.timeScale=e)}),this.animFolder.add({playAll:()=>this.playAllClips()},"playAll"),this.morphFolder=t.addFolder("Morph Targets"),this.morphFolder.domElement.style.display="none",this.cameraFolder=t.addFolder("Cameras"),this.cameraFolder.domElement.style.display="none";const g=t.addFolder("Performance"),v=document.createElement("li");this.stats.dom.style.position="static",v.appendChild(this.stats.dom),v.classList.add("gui-stats"),g.__ul.appendChild(v);const y=document.createElement("div");this.el.appendChild(y),y.classList.add("gui-wrap"),y.appendChild(t.domElement),t.open()}updateGUI(){this.cameraFolder.domElement.style.display="none",this.morphCtrls.forEach(e=>e.remove()),this.morphCtrls.length=0,this.morphFolder.domElement.style.display="none",this.animCtrls.forEach(e=>e.remove()),this.animCtrls.length=0,this.animFolder.domElement.style.display="none";const e=[],t=[];if(this.content.traverse(n=>{n.isMesh&&n.morphTargetInfluences&&t.push(n),n.isCamera&&(n.name=n.name||`VIEWER__camera_${e.length+1}`,e.push(n.name))}),e.length){this.cameraFolder.domElement.style.display="",this.cameraCtrl&&this.cameraCtrl.remove();const t=[h].concat(e);this.cameraCtrl=this.cameraFolder.add(this.state,"camera",t),this.cameraCtrl.onChange(e=>this.setCamera(e))}if(t.length&&(this.morphFolder.domElement.style.display="",t.forEach(e=>{if(e.morphTargetInfluences.length){const t=this.morphFolder.add({name:e.name||"Untitled"},"name");this.morphCtrls.push(t)}for(let t=0;t<e.morphTargetInfluences.length;t++){const n=this.morphFolder.add(e.morphTargetInfluences,t,0,1,.01).listen();Object.keys(e.morphTargetDictionary).forEach(a=>{a&&e.morphTargetDictionary[a]===t&&n.name(a)}),this.morphCtrls.push(n)}})),this.clips.length){this.animFolder.domElement.style.display="";const e=this.state.actionStates={};this.clips.forEach((t,n)=>{let a;0===n?(e[t.name]=!0,(a=this.mixer.clipAction(t)).play()):e[t.name]=!1;const i=this.animFolder.add(e,t.name).listen();i.onChange(e=>{(a=a||this.mixer.clipAction(t)).setEffectiveTimeScale(1),e?a.play():a.stop()}),this.animCtrls.push(i)})}}clear(){this.content&&(this.scene.remove(this.content),this.content.traverse(e=>{e.isMesh&&e.geometry.dispose()}),u(this.content,e=>{p.forEach(t=>{e[t]&&e[t].dispose()})}))}}}),e("skylark-threegltfviewer/SimpleDropzone",["skylark-langx-emitter","skylark-langx-async/Deferred","skylark-domx-velm","skylark-domx-files","skylark-domx-plugins","skylark-jszip","./threegltviewer"],function(e,t,n,a,i,r,o){return o.SimpleDropzone=class extends i.Plugin{get klassName(){return"SingleUploader"}get pluginName(){return"lark.singleuploader"}get options(){return{selectors:{picker:".file-picker",dropzone:".file-dropzone",pastezone:".file-pastezone",startUploads:".start-uploads",cancelUploads:".cancel-uploads"}}}constructor(e,t){super(e,t),this._velm=n(this._elm),this._initFileHandlers()}_initFileHandlers(){var e=this,t=this.options.selectors,n=t.dropzone,a=t.pastezone,i=t.picker;n&&this._velm.$(n).dropzone({dropped:function(t){e._addFile(t[0])}}),a&&this._velm.$(a).pastezone({pasted:function(t){e._addFile(t[0])}}),i&&this._velm.$(i).picker({multiple:!0,picked:function(t){e._addFile(t[0])}})}_addFile(e){this._isZip(e)?this._loadZip(e):this.emit("drop",{files:new Map([[e.name,e]])})}destroy(){}_loadZip(e){const n=new Map;r(e).then(a=>{var i=[];a.forEach((e,a)=>{var r=new t;a.async("arraybuffer").then(function(e){a.dir||n.set(a.name,new Blob([e],{type:a.name.match(/\.(png)$/)?"image/png":void 0})),r.resolve()}),i.push(r.promise)}),t.all(i).then(()=>{this.emit("drop",{files:n,archive:e})})})}_isZip(e){return"application/zip"===e.type||e.name.match(/\.zip$/)}_fail(e){this.emit("droperror",{message:e})}}}),e("skylark-threegltfviewer/App",["skylark-threejs-ex/WebGL","./threegltviewer","./Viewer","./SimpleDropzone"],function(e,t,n,a){"use strict";return t.App=class{constructor(e,t){const n={};this.options={kiosk:Boolean(n.kiosk),model:n.model||"",preset:n.preset||"",cameraPosition:n.cameraPosition?n.cameraPosition.split(",").map(Number):null},this.el=e,this.viewer=null,this.viewerEl=null,this.spinnerEl=e.querySelector(".spinner"),this.dropEl=e.querySelector(".dropzone"),this.inputEl=e.querySelector("#file-input"),this.createDropzone(),this.hideSpinner();const a=this.options;if(a.kiosk){const e=document.querySelector("header");e.style.display="none"}a.model&&this.view(a.model,"",new Map)}createDropzone(){const e=new a(this.el.querySelector(".wrap"),{selectors:{dropzone:".dropzone",picker:".upload-btn"}});e.on("drop",(e,{files:t})=>this.load(t)),e.on("dropstart",e=>this.showSpinner()),e.on("droperror",e=>this.hideSpinner())}createViewer(){return this.viewerEl=document.createElement("div"),this.viewerEl.classList.add("viewer"),this.dropEl.innerHTML="",this.dropEl.appendChild(this.viewerEl),this.viewer=new n(this.viewerEl,this.options),this.viewer}load(e){let t,n;Array.from(e).forEach(([e,a])=>{e.match(/\.(gltf|glb|3ds|obj)$/)&&(t=a,n="")}),t||this.onError("No asset(.gltf,.glb,.3ds,.obj) found."),this.view(t,n,e)}view(e,t,n){this.viewer&&this.viewer.clear();const a=this.viewer||this.createViewer(),i="string"==typeof e?e:URL.createObjectURL(e),r=()=>{this.hideSpinner(),"object"==typeof e&&URL.revokeObjectURL(i)};a.load(i,t,n).catch(e=>this.onError(e)).then(e=>{r()})}onError(e){let t=(e||{}).message||e.toString();t.match(/ProgressEvent/)?t="Unable to retrieve this file. Check JS console and browser network tab.":t.match(/Unexpected token/)?t=`Unable to parse file content. Verify that this file is valid. Error: "${t}"`:e&&e.target&&e.target instanceof Image&&(t="Missing texture: "+e.target.src.split("/").pop()),window.alert(t),console.error(e)}showSpinner(){this.spinnerEl.style.display=""}hideSpinner(){this.spinnerEl.style.display="none"}}}),e("skylark-threegltfviewer/main",["./threegltviewer","./App"],function(e){return e}),e("skylark-threegltfviewer",["skylark-threegltfviewer/main"],function(e){return e})}(n),!a){var o=require("skylark-langx-ns");i?module.exports=o:t.skylarkjs=o}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-threegltfviewer.js.map
